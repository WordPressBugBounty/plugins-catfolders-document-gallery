(()=>{"use strict";var e={162:(e,t,l)=>{var a=l(609),n=l(888),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useSyncExternalStore,c=a.useRef,i=a.useEffect,s=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,l,a,n){var u=c(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=s(function(){function e(e){if(!i){if(i=!0,r=e,e=a(e),void 0!==n&&m.hasValue){var t=m.value;if(n(t,e))return c=t}return c=e}if(t=c,o(r,e))return t;var l=a(e);return void 0!==n&&n(t,l)?(r=e,t):(r=e,c=l)}var r,c,i=!1,s=void 0===l?null:l;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,l,a,n]);var f=r(e,u[0],u[1]);return i(function(){m.hasValue=!0,m.value=f},[f]),d(f),f}},242:(e,t,l)=>{e.exports=l(162)},419:(e,t,l)=>{l.d(t,{A:()=>a}),l(609);const a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDkiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCA0OSAzOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ0LjI0NTkgNC4yNjU1NEgyMi44MjY3QzIxLjcxMjEgNC4yNjU1NCAyMC42NDYgMy43ODYyNyAxOS45MTkxIDIuOTcxNUwxOC42MTA3IDEuNTMzNjhDMTcuNzM4NSAwLjUyNzIwMiAxNi40MyAwIDE1LjEyMTYgMEg1LjYyMzU2QzMuMDA2NzQgMCAwLjkyMjk3NCAyLjA2MDg4IDAuOTIyOTc0IDQuNjQ4OTZWMzIuMzk5QzAuOTIyOTc0IDM0LjkzOTEgMy4wMDY3NCAzNy4wNDc5IDUuNjIzNTYgMzcuMDQ3OUg0NC4yNDU5QzQ2LjgxNDIgMzcuMDQ3OSA0OC45NDY0IDM0Ljk4NyA0OC45NDY0IDMyLjM5OVY4LjkxNDUxQzQ4Ljk0NjQgNi4zNzQzNSA0Ni44NjI3IDQuMjY1NTQgNDQuMjQ1OSA0LjI2NTU0Wk00NC42ODIgMzIuNzgyNEg1LjE4NzQyVjguNDgzMTZINDQuNjMzNVYzMi44MzAzTDQ0LjY4MiAzMi43ODI0WiIgZmlsbD0iIzIyNzFCMSIvPgo8L3N2Zz4K"},493:(e,t,l)=>{var a=l(609),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=a.useState,r=a.useEffect,c=a.useLayoutEffect,i=a.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!n(e,l)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var l=t(),a=o({inst:{value:l,getSnapshot:t}}),n=a[0].inst,d=a[1];return c(function(){n.value=l,n.getSnapshot=t,s(n)&&d({inst:n})},[e,l,t]),r(function(){return s(n)&&d({inst:n}),e(function(){s(n)&&d({inst:n})})},[e]),i(l),l};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},609:e=>{e.exports=window.React},888:(e,t,l)=>{e.exports=l(493)}},t={};function l(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,l),o.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=l(609);const n=window.wp.i18n,o=function(){return(0,a.createElement)("div",{className:"block-spinner-wrap"},(0,a.createElement)("span",{className:"spinner is-active"}))},r=window.wp.element,c=window.wp.components,i=(0,a.createContext)(null);function s(){const e=(0,a.useContext)(i);if(null===e)throw Error("You need to use this hook inside a Provider!");return e}const d=(0,r.memo)(function({treeOptions:e}){const{attributes:t,setAttribute:l}=s(),{folders:o,libraryType:r}=t;return(0,a.createElement)("div",{className:"catf-dg-folders-setting"},e.length>0?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.SelectControl,{className:"catf-dg-select-wrapper",value:o,options:e,multiple:!0,onChange:e=>{"hierarchical_folders"==r&&e.length>1?l({folders:[e[0]]}):l({folders:e})},style:{height:200,overflow:"auto"}}),(0,a.createElement)("input",{type:"text",value:JSON.stringify(o),name:"folders",readOnly:!0,hidden:!0})):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",null,(0,n.__)("Oops, you don't have any folder","catfolders-document-gallery")),(0,a.createElement)(c.Button,{href:`${window.catfData.adminUrl}upload.php`,variant:"primary",target:"_blank",className:"catf-dg-create-folder-btn"},(0,n.__)("Create your first folder","catfolders-document-gallery"))))}),u=((0,n.__)("Thumbnail","catfolders-document-gallery"),(0,n.__)("Medium","catfolders-document-gallery"),(0,n.__)("Large","catfolders-document-gallery"),(0,n.__)("Full Size","catfolders-document-gallery"),[{value:"list",label:(0,n.__)("List","catfolders-document-gallery")},{value:"grid",label:(0,n.__)("Grid","catfolders-document-gallery")}]),m=[{value:"title",label:(0,n.__)("Title","catfolders-document-gallery")},{value:"updated",label:(0,n.__)("Modified","catfolders-document-gallery")},{value:"size",label:(0,n.__)("Size","catfolders-document-gallery")},{value:"counter",label:(0,n.__)("Counter","catfolders-document-gallery")}],f=[{value:"ASC",label:(0,n.__)("Ascending","catfolders-document-gallery")},{value:"DESC",label:(0,n.__)("Descending","catfolders-document-gallery")}],p=[{value:"narrow",label:(0,n.__)("Narrow","catfolders-document-gallery")},{value:"all",label:(0,n.__)("All","catfolders-document-gallery")}],g=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],y=[{value:"image",label:(0,n.__)("Image","catfolders-document-gallery")},{value:"title",label:(0,n.__)("Title","catfolders-document-gallery")},{value:"type",label:(0,n.__)("Type","catfolders-document-gallery")},{value:"size",label:(0,n.__)("Size","catfolders-document-gallery")},{value:"updated",label:(0,n.__)("Updated","catfolders-document-gallery")},{value:"counter",label:(0,n.__)("Counter","catfolders-document-gallery")},{value:"link",label:(0,n.__)("Action","catfolders-document-gallery")}],_=[{value:"preview",label:(0,n.__)("Preview File","catfolders-document-gallery")},{value:"popup",label:(0,n.__)("Popup Window","catfolders-document-gallery")},{value:"download",label:(0,n.__)("Download File","catfolders-document-gallery")},{value:"",label:(0,n.__)("None","catfolders-document-gallery")}],b=[{value:"p",label:(0,n.__)("Paragraph","catfolders-document-gallery")},{value:"h1",label:(0,n.__)("Heading 1","catfolders-document-gallery")},{value:"h2",label:(0,n.__)("Heading 2","catfolders-document-gallery")},{value:"h3",label:(0,n.__)("Heading 3","catfolders-document-gallery")},{value:"h4",label:(0,n.__)("Heading 4","catfolders-document-gallery")}],h=((0,n.__)("Display as a single folder","catfolders-document-gallery"),(0,n.__)("Display as hierarchical folders","catfolders-document-gallery"),[{value:"top",label:(0,n.__)("Top","catfolders-document-gallery")},{value:"bottom",label:(0,n.__)("Bottom","catfolders-document-gallery")},{value:"both",label:(0,n.__)("Both","catfolders-document-gallery")},{value:"",label:(0,n.__)("Hide","catfolders-document-gallery")}]),v=(e,t)=>{const{limit:l}=e,a=t?Object.values(t):[],o=(t=>{let l;const a=t=>t.findIndex(t=>t.key===e.orderBy);return l=t.some(e=>"image"===e.key)?a(t):a(t)+1,l})(a),r=(e,t=[],l)=>{const a=[];return e.forEach((e,n)=>{"exclude"===l?!t.includes(e.key)&&a.push(n):t.includes(e.key)&&a.push(n)}),a},c=[];return a.forEach((e,t)=>{-1!==["image","link"].indexOf(e.key)&&c.push(t)}),{order:-1===o?[]:[o,e.orderType.toLowerCase()],columnDefs:[{type:"natural-nohtml",target:r(a,["size","updated"],"exclude")},{type:"file-size",targets:r(a,["size"],"include")},{orderable:!1,target:0!==c.length?c:[]},{searchable:!1,target:r(a,["link","image"],"include")},{type:"date-sort",targets:r(a,["updated"],"include")}],lengthMenu:[[l,2*l,4*l,8*l,-1],[l,2*l,4*l,8*l,(0,n.__)("All","catfolders-document-gallery")]],language:{searchPlaceholder:(0,n.__)("Search by title…","catfolders-document-gallery"),search:(0,n.__)("Search:","catfolders-document-gallery"),lengthMenu:`<span>${(0,n.__)("Items per page","catfolders-document-gallery")}</span> _MENU_`,info:"_START_ - _END_ "+(0,n.__)("of","catfolders-document-gallery")+" _TOTAL_",paginate:{next:'<svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1.5L6 7L1 12.5" stroke="currentColor" stroke-width="1.5"/></svg>',previous:'<svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 1.5L2 7L7 12.5" stroke="currentColor" stroke-width="1.5"/></svg>'},aria:{sortAscending:(0,n.__)(": activate to sort column ascending","catfolders-document-gallery"),sortDescending:(0,n.__)(": activate to sort column descending","catfolders-document-gallery")}},pageLength:+l,autoWidth:!1,responsive:!0,sDom:E(e),drawCallback(t){const l=this.api().page.info().recordsTotal,a=jQuery(t.nTableWrapper).closest("#cf-app");!function(e,t,l=0){l<e.limit&&t.find(".cf-pagination").css("display","none"),e.libraryIcon.display?t.find(".cf-title img").css("display","block"):t.find(".cf-title img").css("display","none"),e.displayTitle?t.find(".cf-title span").css("display","block"):t.find(".cf-title span").css("display","none"),t.find(".cf-table__top").is(":empty")&&t.find(".cf-table__top").css("display","none"),t.find(".cf-table__bottom").is(":empty")&&t.find(".cf-table__bottom").css("display","none"),e.documentIcons.display?t.find(".cf-icon").removeClass("cf-hidden"):t.find(".cf-icon").addClass("cf-hidden"),e.displayColumns.image&&(t.find("th:first-child").addClass("cf-thumbnail-th"),t.find(".cf-table").addClass("cf-has-thumbnail"))}(e,a,l),k(a,e.displayColumns),I(t)}}},E=e=>{const t=e.searchBarPlacement,l=e.paginationPlacement,a=e.layoutIconPlacement;return'<"cf-table__top"'+("top"===t||"both"===t?"f":"")+("top"===a||"both"===a?' <"cf-options_info"l <"cf-options" <"cf-options__list"><"cf-options__grid">>>':"")+("top"===l||"both"===l?'<"cf-pagination" lip>':"")+'><"cf-table__main"rt><"cf-table__bottom"'+("bottom"===t||"both"===t?"f":"")+("bottom"===a||"both"===a?'<"cf-options_info"l <"cf-options" <"cf-options__list"><"cf-options__grid">>>':"")+("bottom"===l||"both"===l?'<"cf-pagination" lip>':"")+">"},C=(e,t)=>{const l=jQuery("#"+e).closest("#cf-app"),a=l.find(".cf-table"),n=l.find(".cf-options__grid"),o=l.find(".cf-options__list");"grid"===t?(n.addClass("active"),o.removeClass("active"),a.addClass("cf-table-grid"),a.find(".cf-column-thumbnail").length>0&&a.addClass("cf-has-thumbnail")):(o.addClass("active"),n.removeClass("active"),a.removeClass("cf-table-grid"),a.removeClass("cf-has-thumbnail"))},w=(e,t)=>{jQuery("#"+e).closest("#cf-app").find(".cf-title").replaceWith(function(){return jQuery(`<${t}>`,{class:"cf-title"}).html(jQuery(this).html())})},S=(e,t,l,a)=>{const o=jQuery("#"+e).closest("#cf-app");o.find(".btn-download img").remove(),o.find(".btn-download svg").remove(),"library"===t&&l&&""!==l?o.find(".btn-download").prepend(`<img src="${l}" alt="${(0,n.__)("Icon","catfolders-document-gallery")}">`):"custom"===t&&a&&o.find(".btn-download").prepend(a)},x=e=>{const t=jQuery("#"+e).closest("#cf-app");t.find(".cf-table-grid .cf-column-thumbnail").length>0?t.find(".cf-table").addClass("cf-has-thumbnail"):t.find(".cf-table").removeClass("cf-has-thumbnail")},I=e=>{jQuery.each(e.aoHeader,function(e,t){jQuery.each(t,function(e,t){if(t.cell.ariaLabel){const e=t.cell.ariaLabel.replace(/\s*:\s*/g,": ").trim();jQuery(t.cell).attr("aria-description",e),jQuery(t.cell).removeAttr("aria-label")}})})},N=e=>{const t=e.match(/<[^>]+>([^<]+)<\/[^>]+>/);return t?t[1].replace(/\t/g,"").toLowerCase():""},T=e=>{const t={xan:"Jan",feb:"Feb",mar:"Mar",abr:"Apr",mai:"May",xuñ:"Jun",xul:"Jul",ago:"Aug",set:"Sep",out:"Oct",nov:"Nov",dec:"Dec"};let l=e;if((document.documentElement.lang||"en-US").toLowerCase().startsWith("gl"))for(const[e,a]of Object.entries(t)){const t=new RegExp(`\\b${e}\\b`,"i");if(t.test(l)){l=l.replace(t,a);break}}return Date.parse(l)},j=(e,t,l)=>{const a=T(N(e)),n=T(N(t));switch(l){case"asc":return a<n?-1:a>n?1:0;case"desc":return a<n?1:a>n?-1:0}};function k(e,t){t.image?t.title||t.size||t.updated?(e.find("td:first-child").removeClass("no-margin-bottom"),e.find("td:first-child").addClass("has-margin-bottom"),e.find(".cf-column-last").removeClass("no-margin-top"),e.find(".cf-column-last").addClass("has-margin-top")):t.title||t.size||t.updated||(e.find("td:first-child").removeClass("has-margin-bottom"),e.find("td:first-child").addClass("no-margin-bottom"),e.find(".cf-column-last").removeClass("has-margin-top"),e.find(".cf-column-last").addClass("no-margin-top")):t.image||(t.title||t.size||t.updated)&&(e.find("td:first-child").removeClass("has-margin-bottom"),e.find("td:first-child").addClass("no-margin-bottom"),e.find(".cf-column-last").removeClass("no-margin-top"),e.find(".cf-column-last").addClass("has-margin-top"))}const z=e=>{let t;const l=new Set,a=(e,a)=>{const n="function"==typeof e?e(t):e;if(!Object.is(n,t)){const e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),l.forEach(l=>l(t,e))}},n=()=>t,o={setState:a,getState:n,getInitialState:()=>r,subscribe:e=>(l.add(e),()=>l.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),l.clear()}},r=t=e(a,n,o);return o};var O=l(242);const{useDebugValue:D}=a,{useSyncExternalStoreWithSelector:P}=O;let M=!1;const L=e=>e,A=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?z(e):z)(e):e,l=(e,l)=>function(e,t=L,l){l&&!M&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),M=!0);const a=P(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,l);return D(a),a}(t,e,l);return Object.assign(l,t),l};var Q=Symbol.for("immer-nothing"),F=Symbol.for("immer-draftable"),B=Symbol.for("immer-state");function H(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var R=Object.getPrototypeOf;function U(e){return!!e&&!!e[B]}function $(e){return!!e&&(Y(e)||Array.isArray(e)||!!e[F]||!!e.constructor?.[F]||X(e)||q(e))}var W=Object.prototype.constructor.toString(),V=new WeakMap;function Y(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const l=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(l===Object)return!0;if("function"!=typeof l)return!1;let a=V.get(l);return void 0===a&&(a=Function.toString.call(l),V.set(l,a)),a===W}function Z(e,t,l=!0){0===G(e)?(l?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((l,a)=>t(a,l,e))}function G(e){const t=e[B];return t?t.type_:Array.isArray(e)?1:X(e)?2:q(e)?3:0}function J(e,t){return 2===G(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K(e,t,l){const a=G(e);2===a?e.set(t,l):3===a?e.add(l):e[t]=l}function X(e){return e instanceof Map}function q(e){return e instanceof Set}function ee(e){return e.copy_||e.base_}function te(e,t){if(X(e))return new Map(e);if(q(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const l=Y(e);if(!0===t||"class_only"===t&&!l){const t=Object.getOwnPropertyDescriptors(e);delete t[B];let l=Reflect.ownKeys(t);for(let a=0;a<l.length;a++){const n=l[a],o=t[n];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[n]})}return Object.create(R(e),t)}{const t=R(e);if(null!==t&&l)return{...e};const a=Object.create(t);return Object.assign(a,e)}}function le(e,t=!1){return ne(e)||U(e)||!$(e)||(G(e)>1&&Object.defineProperties(e,{set:ae,add:ae,clear:ae,delete:ae}),Object.freeze(e),t&&Object.values(e).forEach(e=>le(e,!0))),e}var ae={value:function(){H(2)}};function ne(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var oe,re={};function ce(e){const t=re[e];return t||H(0),t}function ie(){return oe}function se(e,t){t&&(ce("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function de(e){ue(e),e.drafts_.forEach(fe),e.drafts_=null}function ue(e){e===oe&&(oe=e.parent_)}function me(e){return oe={drafts_:[],parent_:oe,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fe(e){const t=e[B];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function pe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const l=t.drafts_[0];return void 0!==e&&e!==l?(l[B].modified_&&(de(t),H(4)),$(e)&&(e=ge(t,e),t.parent_||_e(t,e)),t.patches_&&ce("Patches").generateReplacementPatches_(l[B].base_,e,t.patches_,t.inversePatches_)):e=ge(t,l,[]),de(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Q?e:void 0}function ge(e,t,l){if(ne(t))return t;const a=e.immer_.shouldUseStrictIteration(),n=t[B];if(!n)return Z(t,(a,o)=>ye(e,n,t,a,o,l),a),t;if(n.scope_!==e)return t;if(!n.modified_)return _e(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let o=t,r=!1;3===n.type_&&(o=new Set(t),t.clear(),r=!0),Z(o,(a,o)=>ye(e,n,t,a,o,l,r),a),_e(e,t,!1),l&&e.patches_&&ce("Patches").generatePatches_(n,l,e.patches_,e.inversePatches_)}return n.copy_}function ye(e,t,l,a,n,o,r){if(null==n)return;if("object"!=typeof n&&!r)return;const c=ne(n);if(!c||r){if(U(n)){const r=ge(e,n,o&&t&&3!==t.type_&&!J(t.assigned_,a)?o.concat(a):void 0);if(K(l,a,r),!U(r))return;e.canAutoFreeze_=!1}else r&&l.add(n);if($(n)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[a]===n&&c)return;ge(e,n),t&&t.scope_.parent_||"symbol"==typeof a||!(X(l)?l.has(a):Object.prototype.propertyIsEnumerable.call(l,a))||_e(e,n)}}}function _e(e,t,l=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&le(t,l)}var be={get(e,t){if(t===B)return e;const l=ee(e);if(!J(l,t))return function(e,t,l){const a=Ee(t,l);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}(e,l,t);const a=l[t];return e.finalized_||!$(a)?a:a===ve(e.base_,t)?(we(e),e.copy_[t]=Se(a,e)):a},has:(e,t)=>t in ee(e),ownKeys:e=>Reflect.ownKeys(ee(e)),set(e,t,l){const a=Ee(ee(e),t);if(a?.set)return a.set.call(e.draft_,l),!0;if(!e.modified_){const a=ve(ee(e),t),r=a?.[B];if(r&&r.base_===l)return e.copy_[t]=l,e.assigned_[t]=!1,!0;if(((n=l)===(o=a)?0!==n||1/n==1/o:n!=n&&o!=o)&&(void 0!==l||J(e.base_,t)))return!0;we(e),Ce(e)}var n,o;return e.copy_[t]===l&&(void 0!==l||t in e.copy_)||Number.isNaN(l)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=l,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ve(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,we(e),Ce(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const l=ee(e),a=Reflect.getOwnPropertyDescriptor(l,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:l[t]}:a},defineProperty(){H(11)},getPrototypeOf:e=>R(e.base_),setPrototypeOf(){H(12)}},he={};function ve(e,t){const l=e[B];return(l?ee(l):e)[t]}function Ee(e,t){if(!(t in e))return;let l=R(e);for(;l;){const e=Object.getOwnPropertyDescriptor(l,t);if(e)return e;l=R(l)}}function Ce(e){e.modified_||(e.modified_=!0,e.parent_&&Ce(e.parent_))}function we(e){e.copy_||(e.copy_=te(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Se(e,t){const l=X(e)?ce("MapSet").proxyMap_(e,t):q(e)?ce("MapSet").proxySet_(e,t):function(e,t){const l=Array.isArray(e),a={type_:l?1:0,scope_:t?t.scope_:ie(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,o=be;l&&(n=[a],o=he);const{revoke:r,proxy:c}=Proxy.revocable(n,o);return a.draft_=c,a.revoke_=r,c}(e,t);return(t?t.scope_:ie()).drafts_.push(l),l}function xe(e){if(!$(e)||ne(e))return e;const t=e[B];let l,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,l=te(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else l=te(e,!0);return Z(l,(e,t)=>{K(l,e,xe(t))},a),t&&(t.finalized_=!1),l}Z(be,(e,t)=>{he[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),he.deleteProperty=function(e,t){return he.set.call(this,e,t,void 0)},he.set=function(e,t,l){return be.set.call(this,e[0],t,l,e[0])};var Ie=(new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,l)=>{if("function"==typeof e&&"function"!=typeof t){const l=t;t=e;const a=this;return function(e=l,...n){return a.produce(e,e=>t.call(this,e,...n))}}let a;if("function"!=typeof t&&H(6),void 0!==l&&"function"!=typeof l&&H(7),$(e)){const n=me(this),o=Se(e,void 0);let r=!0;try{a=t(o),r=!1}finally{r?de(n):ue(n)}return se(n,l),pe(a,n)}if(!e||"object"!=typeof e){if(a=t(e),void 0===a&&(a=e),a===Q&&(a=void 0),this.autoFreeze_&&le(a,!0),l){const t=[],n=[];ce("Patches").generateReplacementPatches_(e,a,t,n),l(t,n)}return a}H(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...l)=>this.produceWithPatches(t,t=>e(t,...l));let l,a;return[this.produce(e,t,(e,t)=>{l=e,a=t}),l,a]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){var t;$(e)||H(8),U(e)&&(U(t=e)||H(10),e=xe(t));const l=me(this),a=Se(e,void 0);return a[B].isManual_=!0,ue(l),a}finishDraft(e,t){const l=e&&e[B];l&&l.isManual_||H(9);const{scope_:a}=l;return se(a,t),pe(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let l;for(l=t.length-1;l>=0;l--){const a=t[l];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}l>-1&&(t=t.slice(l+1));const a=ce("Patches").applyPatches_;return U(e)?a(e,t):this.produce(e,e=>a(e,t))}}).produce;const Ne=(ke?A(ke):A)((je=e=>({attributes:{folders:[],libraryIcon:{altText:"icon-folders",display:!0},title:"CatFolders",displayTitle:!0,titleTag:"p",layout:"list",gridColumn:3,searchBarPlacement:"top",layoutIconPlacement:"top",paginationPlacement:"bottom",displayColumns:{image:!1,title:!0,type:!0,size:!0,updated:!0,counter:!0,link:!0},linkTo:"",popupWidth:600,popupHeight:600,limit:10,orderBy:"title",orderType:"ASC",documentIcons:{display:!0},actionLabel:"Download",actionLink:"download",actionColumnLabel:"Link",actionIconId:0,actionIconUrl:"",actionIconType:"custom",actionIconSvg:""},attachments:{columns:[],files:[],foundPosts:0,maxNumPages:0},setAttribute:t=>{const l=Object.keys(t)[0],a=Object.values(t)[0];e(e=>{e.attributes[l]=a})},setAllAttributes:t=>{e(e=>{e.attributes=t})},setAttachments:t=>{e(e=>{e.attachments=t})}}),(e,t,l)=>(l.setState=(t,l,...a)=>{const n="function"==typeof t?Ie(t):t;return e(n,l,...a)},je(l.setState,t,l)))),Te=Ne;var je,ke;const ze=function(){const{clientId:e,attributes:t,setAttribute:l}=s(),{libraryType:o,folders:r,title:i,titleTag:d,libraryIcon:u,linkTo:p,popupWidth:g,popupHeight:y,limit:h,orderBy:v,orderType:E}=t;return Te(e=>e.attachments),(0,a.createElement)("div",{className:"catf-dg-general-settings"},(0,a.createElement)(c.TextControl,{disabled:!1,label:(0,n.__)("Library Title Text","catfolders-document-gallery"),value:i,onChange:t=>{l({title:t}),((e,t)=>{jQuery("#"+e).closest("#cf-app").find(".cf-title span")[0].innerHTML=t})(e,t)},name:"title"}),(0,a.createElement)(c.SelectControl,{disabled:!1,label:(0,n.__)("Library Title Tag","catfolders-document-gallery"),value:d,onChange:t=>{l({titleTag:t}),w(e,t)},options:b,name:"titleTag"}),(0,a.createElement)(c.TextControl,{disabled:!1,label:(0,n.__)("Library Icon Alt Text","catfolders-document-gallery"),value:u.altText,onChange:a=>{l({libraryIcon:{altText:a,display:t.libraryIcon.display}}),((e,t)=>{jQuery("#"+e).closest("#cf-app").find(".cf-title img")[0].setAttribute("alt",t)})(e,a)},name:"libraryIcon[altText]"}),(0,a.createElement)(c.SelectControl,{label:(0,n.__)("Link To","catfolders-document-gallery"),value:p,onChange:e=>{l({linkTo:e})},options:_,name:"linkTo"}),"popup"===p&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.__experimentalSpacer,null,(0,a.createElement)(c.__experimentalNumberControl,{className:"components-base-control",label:(0,n.__)("Popup Width","catfolders-document-gallery"),onChange:e=>{l({popupWidth:Number(e)})},min:100,max:2e3,shiftStep:5,step:1,value:g,name:"popupWidth"})),(0,a.createElement)(c.__experimentalSpacer,null,(0,a.createElement)(c.__experimentalNumberControl,{className:"components-base-control",label:(0,n.__)("Popup Height","catfolders-document-gallery"),onChange:e=>{l({popupHeight:Number(e)})},min:100,max:2e3,shiftStep:5,step:1,value:y,name:"popupHeight"}))),(0,a.createElement)(c.__experimentalSpacer,null,(0,a.createElement)(c.__experimentalNumberControl,{className:"components-base-control",label:(0,n.__)("Limit items","catfolders-document-gallery"),onChange:e=>{l({limit:Number(e)})},min:1,max:200,shiftStep:5,step:1,value:h,name:"limit"})),(0,a.createElement)(c.__experimentalSpacer,null,(0,a.createElement)(c.RadioControl,{label:(0,n.__)("Sort By","catfolders-document-gallery"),onChange:e=>{l({orderBy:e})},options:m,selected:v,name:"orderBy"})),(0,a.createElement)(c.__experimentalSpacer,null,(0,a.createElement)(c.RadioControl,{label:(0,n.__)("Sort Type","catfolders-document-gallery"),onChange:e=>{l({orderType:e})},options:f,selected:E,name:"orderType"})))},Oe=function(){const{clientId:e,attributes:t,setAttribute:l,topRef:o,setNotice:r}=s(),{folders:i,libraryIcon:d,displayTitle:m,layout:f,gridColumn:p,displayColumns:_,searchBarPlacement:b,paginationPlacement:v,layoutIconPlacement:E,documentIcons:w}=t,[S,I]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(()=>{const e=catf_dg.verify_imagick;I(e.status)})()},[]),Te(e=>e.attachments);return(0,a.createElement)("div",{className:"catf-dg-display-settings"},(0,a.createElement)("h6",{className:"catf-dg-component-label"},(0,n.__)("Library Icon","catfolders-document-gallery")),(0,a.createElement)(c.ToggleControl,{label:d.display?(0,n.__)("Show","catfolders-document-gallery"):(0,n.__)("Hide","catfolders-document-gallery"),checked:d.display,onChange:t=>{l({libraryIcon:{...d,display:t}}),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app").find(".cf-title img");t?l.css("display","block"):l.css("display","none")})(e,t)}}),(0,a.createElement)("input",{type:"hidden",name:"libraryIcon[display]",value:String(d.display)}),(0,a.createElement)("h6",{className:"catf-dg-component-label"},(0,n.__)("Library Title","catfolders-document-gallery")),(0,a.createElement)(c.ToggleControl,{label:m?(0,n.__)("Show","catfolders-document-gallery"):(0,n.__)("Hide","catfolders-document-gallery"),checked:m,onChange:t=>{l({displayTitle:t}),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app").find(".cf-title span");t?l.css("display","block"):l.css("display","none")})(e,t)}}),(0,a.createElement)("input",{type:"hidden",name:"displayTitle",value:String(m)}),(0,a.createElement)("h6",{className:"catf-dg-component-label"},(0,n.__)("Document Icons","catfolders-document-gallery")),(0,a.createElement)(c.ToggleControl,{label:w.display?(0,n.__)("Show","catfolders-document-gallery"):(0,n.__)("Hide","catfolders-document-gallery"),checked:w.display,onChange:t=>{l({documentIcons:{...w,display:t}}),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app").find(".cf-icon");t?l.removeClass("cf-hidden"):l.addClass("cf-hidden"),x(e)})(e,t)}}),(0,a.createElement)("input",{type:"hidden",name:"documentIcons[display]",value:String(w.display)}),(0,a.createElement)(c.SelectControl,{label:(0,n.__)("Search Bar Placement","catfolders-document-gallery"),options:h,value:b,onChange:e=>{l({searchBarPlacement:e})},name:"searchBarPlacement"}),(0,a.createElement)(c.SelectControl,{label:(0,n.__)("Pagination Placement","catfolders-document-gallery"),options:h,value:v,onChange:e=>{l({paginationPlacement:e})},name:"paginationPlacement"}),(0,a.createElement)(c.SelectControl,{label:(0,n.__)("Layout Icon Placement","catfolders-document-gallery"),options:h,value:E,onChange:e=>{l({layoutIconPlacement:e})},name:"layoutIconPlacement"}),(0,a.createElement)(c.__experimentalSpacer,null,(0,a.createElement)(c.RadioControl,{label:(0,n.__)("Layout Display","catfolders-document-gallery"),onChange:t=>{l({layout:t}),C(e,t)},options:u,selected:f,name:"layout"})),"grid"===f&&(0,a.createElement)(c.RangeControl,{label:"Column",allowReset:!0,resetFallbackValue:3,step:1,withInputField:!1,separatorType:"none",trackColor:"green",isShiftStepEnabled:!0,marks:g,railColor:"red",value:p,onChange:e=>{l({gridColumn:e})},min:1,max:6,name:"gridColumn"}),(0,a.createElement)("h6",{className:"catf-dg-component-label"},(0,n.__)("Display Fields","catfolders-document-gallery")),y.map(t=>(0,a.createElement)("div",{className:"cf-dg-display-field-settings",key:t.value},(0,a.createElement)(c.ToggleControl,{label:t.label,checked:_[t.value],onChange:a=>(async(t,a)=>{const n={..._};n[t]="image"===t?(e=>S?(r({imageColumnNotice:!1}),e):(o.current.scrollIntoView({top:0,left:0,behavior:"smooth"}),r({imageColumnNotice:!0}),!1))(a):a,await l({displayColumns:n}),k(jQuery("#"+e).closest("#cf-app"),n),x(e)})(t.value,a)}),(0,a.createElement)("input",{type:"hidden",name:`displayColumns[${t.value}]`,value:String(_[t.value])}))))};function De(){const{clientId:e,attributes:t,setAttribute:l}=s();let o;const{actionLabel:r,actionLink:i,actionColumnLabel:d,actionIconId:u,actionIconUrl:m,actionIconType:f,actionIconSvg:p}=t;return(0,a.createElement)("div",{className:"catf-dg-display-settings"},(0,a.createElement)(c.TextControl,{disabled:!1,label:(0,n.__)("Column Label","catfolders-document-gallery"),value:d,onChange:e=>{l({actionColumnLabel:e})},name:"actionColumnLabel"}),(0,a.createElement)(c.TextControl,{disabled:!1,label:(0,n.__)("Button Label","catfolders-document-gallery"),value:r,onChange:t=>{var a;l({actionLabel:t}),a=t,jQuery("#"+e).closest("#cf-app").find(".btn-download span").text(a)},name:"actionLabel"}),(0,a.createElement)(c.SelectControl,{label:(0,n.__)("Link To","catfolders-document-gallery"),value:i,onChange:e=>{l({actionLink:e})},options:_,name:"actionLink"}),(0,a.createElement)(c.ToggleControl,{label:(0,n.__)("Use Custom SVG Icon","catfolders-document-gallery"),checked:"custom"===f,onChange:t=>{l({actionIconType:t?"custom":"library"}),S(e,t?"custom":"library",m,p)},help:"custom"===f?(0,n.__)("Enter your custom SVG code below","catfolders-document-gallery"):(0,n.__)("Select an icon from WordPress Media Library","catfolders-document-gallery")}),(0,a.createElement)("input",{type:"hidden",name:"actionIconId",value:u}),(0,a.createElement)("input",{type:"hidden",name:"actionIconUrl",value:m}),(0,a.createElement)("input",{type:"hidden",name:"actionIconType",value:f}),(0,a.createElement)("div",{style:{display:"custom"===f?"block":"none"}},(0,a.createElement)(c.TextareaControl,{label:(0,n.__)("Custom SVG Code","catfolders-document-gallery"),value:p||"",onChange:t=>{l({actionIconSvg:t}),S(e,"custom",m,t)},placeholder:(0,n.__)("Enter SVG code here...","catfolders-document-gallery"),help:(0,n.__)("Paste your SVG code here. Make sure it's valid SVG markup.","catfolders-document-gallery"),rows:6,name:"actionIconSvg"})),(0,a.createElement)("div",{style:{display:"library"===f?"block":"none"}},(0,a.createElement)("div",{style:{display:"block",marginBottom:"8px",fontWeight:"600",fontSize:"11px",lineHeight:"1.4",textTransform:"uppercase",color:"#1e1e1e"}},(0,n.__)("Icon","catfolders-document-gallery")),u>0?(0,a.createElement)("div",{style:{marginBottom:"12px"}},(0,a.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"}},(0,a.createElement)("img",{src:m,alt:(0,n.__)("Selected icon","catfolders-document-gallery"),style:{width:"40px",height:"40px",objectFit:"contain"}}),(0,a.createElement)(c.Button,{variant:"secondary",onClick:()=>{l({actionIconId:0}),l({actionIconUrl:""}),S(e,"library",null,null)},style:{color:"#d63638"}},(0,n.__)("Remove","catfolders-document-gallery")))):null,(0,a.createElement)(c.Button,{variant:m?"secondary":"primary",onClick:()=>{o||(o=wp.media({title:(0,n.__)("Choose Image","catfolders-document-gallery"),button:{text:(0,n.__)("Select","catfolders-document-gallery")},multiple:!1}),u&&u>0&&o.on("open",function(){const e=o.state().get("selection"),t=wp.media.attachment(u);t.fetch(),e.add(t?[t]:[])}),o.on("select",function(){const t=o.state().get("selection").first().toJSON();l({actionIconId:t.id}),l({actionIconUrl:t.url}),S(e,"library",t.url,null)})),o.open()},style:{width:"100%"}},m?(0,n.__)("Change Icon","catfolders-document-gallery"):(0,n.__)("Select Icon","catfolders-document-gallery")),(0,a.createElement)("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",marginBottom:"0"}},(0,n.__)("Choose an image from your WordPress Media Library to use as the action button icon.","catfolders-document-gallery"))))}function Pe({title:e,children:t,initialOpen:l=!1,className:n="",onToggle:o}){const[r,c]=(0,a.useState)(l),i=["components-panel__body","catf-dg-display-settings-panel-body",n,r?"is-opened":""].filter(Boolean).join(" ");return(0,a.createElement)("div",{className:i},(0,a.createElement)("h2",{className:"components-panel__body-title"},(0,a.createElement)("button",{type:"button","aria-expanded":r,className:"components-button components-panel__body-toggle is-next-40px-default-size",onClick:()=>{const e=!r;c(e),o?.(e)}},(0,a.createElement)("span",{"aria-hidden":"true"},r?(0,a.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"components-panel__arrow","aria-hidden":"true",focusable:"false"},(0,a.createElement)("path",{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})):(0,a.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"components-panel__arrow","aria-hidden":"true",focusable:"false"},(0,a.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))),e)),(0,a.createElement)("div",{className:"components-panel__body-content",style:{display:r?"block":"none"}},t))}const Me=async(e,t)=>{const l=catfData.apiSettings.rest_url,a=catfData.apiSettings.rest_nonce,o=await fetch(`${l}/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":a},body:JSON.stringify(t)}).then(e=>{if(e.ok)return e;throw new Error((0,n.__)("Network response was not ok.","catfolders-document-gallery"))});return await o.json()},Le=(e,t)=>{let l=[];return e.forEach(e=>{const a="-".repeat(t);l.push({...e,title:a+e.title}),e.children&&e.children.length&&(t++,l=l.concat(Le(e.children,t)),t--)}),[...l]},Ae=function(){const[e,t]=(0,a.useState)(!0),{treeOptions:l,getTreeOptions:i}=(()=>{const[e,t]=(0,r.useState)([]);return{treeOptions:e,getTreeOptions:async function(){const e=await Me("get-all-tree-folders"),l=Le(e.tree,0).map(e=>({value:e.id,label:e.title}));t(l)}}})(),{attributes:u,setAttribute:m}=s(),{folders:f,libraryType:g,showBreadCrumb:y,isNestedFolders:_,searchScope:b}=u;return(0,a.useEffect)(()=>{(async()=>{await i(),t(!1)})()},[]),(0,a.createElement)(c.Panel,{className:"catf-dg-shortcode-settings-panel"},(0,a.createElement)(Pe,{title:(0,n.__)("Folders","catfolders-document-gallery"),className:"catf-dg-folders-setting-panel-body",initialOpen:!0},e?(0,a.createElement)(o,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"catf-dg-folders-setting"},(0,a.createElement)(c.SelectControl,{label:(0,n.__)("Library Type","catfolders-document-gallery"),value:g,onChange:e=>{m({libraryType:e}),"hierarchical_folders"==e&&f.length>1&&m({folders:[f[0]]})},name:"libraryType",options:[{value:"single_folder",label:(0,n.__)("Display as a single folder","catfolders-document-gallery")},{value:"hierarchical_folders",label:(0,n.__)("Display as hierarchical folders","catfolders-document-gallery")}]}),"single_folder"===g&&(0,a.createElement)("p",null,(0,n.__)("You can select multiple folders in different levels. All files will be displayed all together in a single list.","catfolders-document-gallery")),"hierarchical_folders"===g&&(0,a.createElement)("p",null,(0,n.__)("You can select only one main folder. Its sub-folders will also be included in the folder tree. Your selected main folder will be the root folder.","catfolders-document-gallery"))),(0,a.createElement)(d,{treeOptions:l}),(0,a.createElement)("div",{className:"catf-dg-folders-setting "+("single_folder"===g?"catf-dg-folders-setting-disabled":"")},(0,a.createElement)(c.RadioControl,{label:(0,n.__)("Search scope","catfolders-document-gallery"),onChange:e=>{m({searchScope:e})},options:p,selected:b,name:"searchScope",disabled:"single_folder"===g})),(0,a.createElement)("div",{className:"catf-dg-folders-setting"},(0,a.createElement)("h3",{style:{fontSize:11,fontWeight:500,textTransform:"uppercase",color:"#3c434a",marginTop:"10px"}},(0,n.__)("Structure Display","catfolders-document-gallery")),(0,a.createElement)(c.ToggleControl,{label:(0,n.__)("Breadcrumb","catfolders-document-gallery"),checked:y,onChange:e=>{m({showBreadCrumb:e})},disabled:"single_folder"==g}),y&&(0,a.createElement)("input",{type:"hidden",name:"showBreadCrumb",value:"1"}),(0,a.createElement)(c.ToggleControl,{label:(0,n.__)("Nested Folders","catfolders-document-gallery"),checked:_,onChange:e=>{m({isNestedFolders:e})},disabled:"single_folder"==g}),_&&(0,a.createElement)("input",{type:"hidden",name:"isNestedFolders",value:"1"})))),(0,a.createElement)(Pe,{title:(0,n.__)("General Options","catfolders-document-gallery"),className:"catf-dg-general-settings-panel-body",initialOpen:!1},(0,a.createElement)(ze,null)),(0,a.createElement)(Pe,{title:(0,n.__)("Action Options","catfolders-document-gallery"),className:"catf-dg-action-settings-panel-body",initialOpen:!1},(0,a.createElement)(De,null)),(0,a.createElement)(Pe,{title:(0,n.__)("Display Options","catfolders-document-gallery"),className:"catf-dg-display-settings-panel-body",initialOpen:!1},(0,a.createElement)(Oe,null)))},{Placeholder:Qe,Icon:Fe}=wp.components,Be=()=>(0,a.createElement)(Qe,{icon:(0,a.createElement)(Fe,{icon:"media-document"}),label:(0,n.__)("CatFolders Document Gallery","catfolders-document-gallery"),instructions:(0,n.__)("Select folders to show content here","catfolders-document-gallery")},(0,a.createElement)("div",{style:{backgroundColor:"#e7e7e7",width:"100%",padding:"30px",display:"flex",justifyContent:"center"}},(0,a.createElement)("div",null,(0,n.__)("Please select your folders that you want display","catfolders-document-gallery")))),He=e=>{const t=`#table-${e}`,l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{jQuery.extend(jQuery.fn.dataTable.ext.type.order,{"date-sort-desc":(e,t)=>j(e,t,"desc")}),jQuery.extend(jQuery.fn.dataTable.ext.type.order,{"date-sort-asc":(e,t)=>j(e,t,"asc")})},[]),{createDataTable:function(a,o,r){jQuery.fn.DataTable.isDataTable(t)&&jQuery(t).DataTable().destroy();const{titleTag:c,displayColumns:i,layout:s}=a,d=v(a,r);d.columns=((e,t)=>{const{actionLabel:l,actionIconType:a,actionIconUrl:o,actionIconSvg:r}=t;let c="";return"library"===a&&o&&""!==o?c=`<img src="${o}" alt="${(0,n.__)("Icon","catfolders-document-gallery")}">`:"custom"===a&&r&&(c=r),[{data:"image",render:(e,t,l)=>`<div class="cf-column-thumbnail">${l.image}</div>`,visible:e.image,orderable:!1},{data:"title",render:(e,t,l)=>`<div class='flex'><a href="${l.url}" class="cf-icon icon-${(e=>["doc","jpg","mp4","other","pdf","ppt","wav","xls","zip"].includes(e)?e:["tif","tiff","jpeg","png","bmp","ithmb","gif","eps","raw","cr2","nef","orf","sr2","apng","avif","jfif","pjpeg","pjp","svg","ico","webp","psd","wbmp"].includes(e)?"jpg":["mp3","aac","aif","aifc","aiff","au","flac","m4a","mid","m4b","m4p","m4r","oga","ogg","opus","ra","ram","spx","wm"].includes(e)?"wav":["3gp","3gpp","3gpp2","3g2","asf","avi","dv","dvi","flv","m2t","m4v","mkv","mov","mpeg","mpg","mts","ogv","ogx","rm","rmvb","ts","vob","webm","wm"].includes(e)?"mp4":["pptx","ppthtml","pptm","pptxml","prn","ps","pps","ppsx","pwz","rtf","tab","template","tsv","vdx","vsd","vss","vst","vsx","vtx"].includes(e)?"ppt":["xlsx","csv","wpd","wps","xdp","xdf","xlam","xll","xlr","xlsb","xlsm","xltm","xltx","xps","wbk","wpd","wi"].includes(e)?"xls":["docx","dochtml","docm","docxml","odt","dot","dothtml","dotm","dotx","eps","fdf","key","keynote","kth","mpp","mpt","mpx","mpd"].includes(e)?"doc":["zip","rar","taz","gzip","tar.bz2","tar.gz"].includes(e)?"zip":"other")(l.type)}">${l.title}</a></div>`,visible:e.title},{data:"type",render:(e,t,l)=>`<div class='cf-column-type'>${l.type}</div>`,visible:e.type},{data:"size",render:(e,t,l)=>`<div class='cf-column-size'>${l.size}</div>`,visible:e.size},{data:"modified",render:(t,l,a)=>`<div class="${e.link?"cf-column-modified cf-column-link":"cf-column-modified"}">${a.modified}</div>`,visible:e.updated},{data:"counter",render:(e,t,l)=>`<div class="cf-download-count">${l.counter}</div>`,visible:e.counter},{data:"link",render:(e,t,a)=>`<div class='cf-column-last'><span class='cf-updated'><small>Updated</small>${a.modified}</span><a href="${a.link}" class="btn-download">${c}<span>${l}</span></a></div>`,visible:e.link,orderable:!1}]})(i,a),d.data=o,o&&(l.current=jQuery(t).DataTable(d),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app");l.find(".cf-options__list").append('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect width="20" height="4" rx="2" transform="matrix(-1 0 0 1 20 0)" fill="currentColor"/>\n    <rect width="20" height="4" rx="2" transform="matrix(-1 0 0 1 20 8)" fill="currentColor"/>\n    <rect width="20" height="4" rx="2" transform="matrix(-1 0 0 1 20 16)" fill="currentColor"/>\n  </svg>'),l.find(".cf-options__grid").append('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 0C18.8807 0 20 1.11929 20 2.5V6.25C20 7.63071 18.8807 8.75 17.5 8.75H13.75C12.3693 8.75 11.25 7.63071 11.25 6.25V2.5C11.25 1.11929 12.3693 0 13.75 0H17.5Z" fill="currentColor"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 0C7.63071 0 8.75 1.11929 8.75 2.5V6.25C8.75 7.63071 7.63071 8.75 6.25 8.75H2.5C1.11929 8.75 0 7.63071 0 6.25V2.5C0 1.11929 1.11929 0 2.5 0H6.25Z" fill="currentColor"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 11.25C7.63071 11.25 8.75 12.3693 8.75 13.75V17.5C8.75 18.8807 7.63071 20 6.25 20H2.5C1.11929 20 0 18.8807 0 17.5V13.75C0 12.3693 1.11929 11.25 2.5 11.25H6.25Z" fill="currentColor"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 11.25C18.8807 11.25 20 12.3693 20 13.75V17.5C20 18.8807 18.8807 20 17.5 20H13.75C12.3693 20 11.25 18.8807 11.25 17.5V13.75C11.25 12.3693 12.3693 11.25 13.75 11.25H17.5Z" fill="currentColor"/>\n  </svg>'),C(e,t)})(e,s),w(e,c))},dataTableRef:l}},Re=l(419).A,Ue=function(){const{clientId:e,attributes:t}=s(),l=Te(e=>e.attachments),o=Te(e=>e.setAttachments),[r,i]=(0,a.useState)(!1),{folders:d,title:u,limit:m,displayColumns:f,searchBarPlacement:p,layoutIconPlacement:g,paginationPlacement:y,orderBy:_,orderType:b,actionColumnLabel:h}=t,{createDataTable:v,dataTableRef:E}=He(e);return(0,a.useEffect)(()=>{d&&d.length>0&&(async()=>{if(!d||0===d.length)return;const e={folders:d,currentPage:1,limit:m,displayColumns:f};i(!0);const t=await Me("get-attachments-folders",e);i(!1),o(t)})()},[d,m]),(0,a.useEffect)(()=>{v(t,l.files,l.columns)},[l,p,y,g]),(0,a.useEffect)(()=>{if(E.current)for(const[e,t]of Object.entries(f))E.current.column(Object.keys(f).findIndex(t=>t===e)).visible(t)},[f]),(0,a.useEffect)(()=>{if(E.current){const e=Object.keys(f).findIndex(e=>e===_);E.current.order([e,b.toLowerCase()]).draw()}},[_,b]),(0,a.createElement)(a.Fragment,null,l.foundPosts?(0,a.createElement)(a.Fragment,null,r?(0,a.createElement)("div",{className:"catf-dg-spinner"},(0,a.createElement)(c.Spinner,null)):(0,a.createElement)(a.Fragment,null),(0,a.createElement)("div",{id:"cf-app",className:r?"cf-app catFolder-addons-block-editor opacity":"cf-app catFolder-addons-block-editor",style:{pointerEvents:"none"}},(0,a.createElement)("div",{"data-layout":t.layout,className:`cf-main ${e}`,id:`${e}`},(0,a.createElement)("div",{className:"container"},(0,a.createElement)("p",{className:"cf-title"},(0,a.createElement)("img",{src:Re,alt:"ico-folders"}),(0,a.createElement)("span",null,u)),(0,a.createElement)("div",{className:"cf-after-heading"},(0,a.createElement)(()=>{if("hierarchical_folders"===t.libraryType){let e=null,n=null;return t.showBreadCrumb&&(e=(0,a.createElement)("div",{dangerouslySetInnerHTML:{__html:l.breadcrumbHtml}})),t.isNestedFolders&&(n=(0,a.createElement)("div",{dangerouslySetInnerHTML:{__html:l.childrenHtml}})),(0,a.createElement)(a.Fragment,null,e,n)}return null},null)),(0,a.createElement)("table",{id:`table-${e}`,className:"cf-table",style:{"--grid-column":t.gridColumn}},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,a.createElement)("span",null,(0,n.__)("Image","catfolders-document-gallery"))),(0,a.createElement)("th",{className:"cf-title-th"},(0,a.createElement)("span",null,(0,n.__)("Title","catfolders-document-gallery"))),(0,a.createElement)("th",null,(0,a.createElement)("span",null,(0,n.__)("Type","catfolders-document-gallery"))),(0,a.createElement)("th",null,(0,a.createElement)("span",null,(0,n.__)("Size","catfolders-document-gallery"))),(0,a.createElement)("th",null,(0,a.createElement)("span",null,(0,n.__)("Updated","catfolders-document-gallery"))),(0,a.createElement)("th",null,(0,a.createElement)("span",null,(0,n.__)("Counter","catfolders-document-gallery"))),(0,a.createElement)("th",null,(0,a.createElement)("span",null,h))))))))):(0,a.createElement)(Be,null))},$e=window.ReactDOM,We=function(){const e=Te(e=>e.attributes),t=Te(e=>e.setAttribute),l=Te(e=>e.setAllAttributes),n=new URLSearchParams(window.location.search).get("post");(0,a.useEffect)(()=>{(async()=>{const e=await Me("get-folders-shortcode-data",{shortcodeId:n});l(e)})()},[]);const o=(0,a.useRef)(null),[r,s]=(0,a.useState)({imageColumnNotice:!1});return(0,a.createElement)(i.Provider,{value:{clientId:"catf-dg-table",attributes:e,setAttribute:t,topRef:o,setNotice:s}},(0,a.createElement)("div",{ref:o}),r.imageColumnNotice&&(0,a.createElement)(c.Notice,{status:"warning",isDismissible:!0,className:"catf-config-notice",onRemove:()=>{s({imageColumnNotice:!1})}},catf_dg.verify_imagick.message,(0,a.createElement)("span",null," ",(0,a.createElement)("a",{href:catf_dg.verify_imagick.navigatePage.url,target:"_blank",rel:"noreferrer"},catf_dg.verify_imagick.navigatePage.content))),(0,a.createElement)(Ue,null),(0,$e.createPortal)((0,a.createElement)(Ae,null),document.getElementById("catf-dg-settings")))},Ve=window.wp.domReady;l.n(Ve)()(()=>{const e=document.getElementById("catf-dg-preview");(0,r.render)((0,a.createElement)(We,null),e)})})();